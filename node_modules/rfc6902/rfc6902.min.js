(function(m){"object"===typeof exports&&"undefined"!==typeof module?module.exports=m():"function"===typeof define&&define.amd?define([],m):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).rfc6902=m()})(function(){return function g(l,d,h){function k(b,e){if(!d[b]){if(!l[b]){var a="function"==typeof require&&require;if(!e&&a)return a(b,!0);if(f)return f(b,!0);a=Error("Cannot find module '"+b+"'");throw a.code="MODULE_NOT_FOUND",a;}a=d[b]={exports:{}};
l[b][0].call(a.exports,function(a){var e=l[b][1][a];return k(e?e:a)},a,a.exports,g,l,d,h)}return d[b].exports}for(var f="function"==typeof require&&require,c=0;c<h.length;c++)k(h[c]);return k}({1:[function(g,l,d){function h(a,b){var e={},c;for(c in a)e[c]=1;for(var d in b)delete e[d];return Object.keys(e)}function k(a){var b={};a.forEach(function(a){for(var e in a)b[e]=(b[e]||0)+1});a=a.length;for(var e in b)b[e]<a&&delete b[e];return Object.keys(b)}function f(a){return void 0===a?"undefined":null===
a?"null":Array.isArray(a)?"array":typeof a}function c(b,e,c){function d(c,f){var h=g[c+","+f];if(void 0===h){if((0,a.compare)(b[c-1],e[f-1]))h=d(c-1,f-1);else{h=[];if(0<c){var k=d(c-1,f);h.push({operations:k.operations.concat({op:"remove",index:c-1}),cost:k.cost+1})}0<f&&(k=d(c,f-1),h.push({operations:k.operations.concat({op:"add",index:c-1,value:e[f-1]}),cost:k.cost+1}));0<c&&0<f&&(k=d(c-1,f-1),h.push({operations:k.operations.concat({op:"replace",index:c-1,value:e[f-1]}),cost:k.cost+1}));h=h.sort(function(a,
b){return a.cost-b.cost})[0]}g[c+","+f]=h}return h}var g={"0,0":{operations:[],cost:0}},f=0;return d(b.length,e.length).operations.map(function(a){if("add"===a.op){var e=a.index+1+f;a={op:a.op,path:c.add(e<b.length?String(e):"-").toString(),value:a.value};f++;return a}return"remove"===a.op?(a={op:a.op,path:c.add(String(a.index+f)).toString()},f--,a):{op:a.op,path:c.add(String(a.index+f)).toString(),value:a.value}})}function b(a,b,c){var d=[];h(a,b).forEach(function(a){d.push({op:"remove",path:c.add(a).toString()})});
h(b,a).forEach(function(a){d.push({op:"add",path:c.add(a).toString(),value:b[a]})});k([a,b]).forEach(function(f){f=e(a[f],b[f],c.add(f));Array.prototype.push.apply(d,f)});return d}function e(e,d,g){var h=f(e),k=f(d);if("array"==h&&"array"==k)return c(e,d,g);if("object"==h&&"object"==k)return b(e,d,g);h=[];(0,a.compare)(e,d)||h.push({op:"replace",path:g.toString(),value:d});return h}Object.defineProperty(d,"__esModule",{value:!0});d.diffAny=e;var a=g("./equal")},{"./equal":2}],2:[function(g,l,d){function h(b,
e){for(var a=[],c=0,d=b.length;c<d;c++)a.push([b[c],e[c]]);return a}function k(b,e){return b.length!==e.length?!1:h(b,e).every(function(a){return c(a[0],a[1])})}function f(b,e){var a=Object.keys(b),d=Object.keys(e);return k(a,d)?a.every(function(a){return c(b[a],e[a])}):!1}function c(b,e){return b===e?!0:Array.isArray(b)&&Array.isArray(e)?k(b,e):Object(b)===b&&Object(e)===e?f(b,e):!1}Object.defineProperty(d,"__esModule",{value:!0});d.compare=c},{}],3:[function(g,l,d){function h(c,b){if(!(c instanceof
b))throw new TypeError("Cannot call a class as a function");}function k(c,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}Object.defineProperty(d,"__esModule",{value:!0});var f=function(c,b,e){var a=!0;for(;a;)if(null===c&&(c=Function.prototype),
a=Object.getOwnPropertyDescriptor(c,b),void 0===a){c=Object.getPrototypeOf(c);if(null===c)break;a=!0}else{if("value"in a)return a.value;b=a.get;return void 0===b?void 0:b.call(e)}};g=function(c){function b(e){h(this,b);f(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,"Value required at path: "+e);this.name=this.constructor.name;this.path=e}k(b,c);return b}(Error);d.MissingError=g;g=function(c){function b(e){h(this,b);f(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,
"Invalid operation: "+e);this.name=this.constructor.name;this.op=e}k(b,c);return b}(Error);d.InvalidOperationError=g;g=function(c){function b(e,a){h(this,b);f(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,"Test failed: "+e+" != "+a);this.name=this.constructor.name;this.actual=e;this.expected=a}k(b,c);return b}(Error);d.TestError=g},{}],4:[function(g,l,d){function h(a,e){return e.map(function(e){var c=b[e.op];return void 0===c?new f.InvalidOperationError(e.op):c(a,e)})}function k(a,
b){var d=new c.Pointer,d=(0,e.diffAny)(a,b,d);d.forEach(function(a){a.path=a.path.toString()});return d}Object.defineProperty(d,"__esModule",{value:!0});d.applyPatch=h;d.patch=function(a,b){console.error("rfc6902.patch(object, patch) has been deprecated. Use rfc6902.applyPatch(object, patch) instead.");return h(a,b)};d.createPatch=k;d.diff=function(a,b){console.error("rfc6902.diff(input, output) has been deprecated. Use rfc6902.createPatch(input, output) instead.");return k(a,b)};var f=g("./errors"),
c=g("./pointer"),b=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(b[e]=a[e]);b["default"]=a;return b}(g("./patch")),e=g("./diff");g=g("./package");d.version=(g&&g.__esModule?g:{"default":g})["default"].version},{"./diff":1,"./errors":3,"./package":5,"./patch":6,"./pointer":7}],5:[function(g,l,d){l.exports={name:"rfc6902",version:"1.0.6",description:"Complete implementation of RFC6902 (patch and diff)",keywords:["json","patch",
"diff","rfc6902"],homepage:"https://github.com/chbrown/rfc6902",repository:"git://github.com/chbrown/rfc6902.git",author:"Christopher Brown <io@henrian.com> (http://henrian.com)",license:"MIT",main:"./rfc6902.js",dependencies:{},devDependencies:{babel:"*",babelify:"*",browserify:"*",derequire:"*","js-yaml":"*",mocha:"*",typescript:"*"},scripts:{test:"make test"}}},{}],6:[function(g,l,d){function h(b,a,c){Array.isArray(b)?"-"==a?b.push(c):b.splice(a,0,c):b[a]=c}function k(b,a){Array.isArray(b)?b.splice(a,
1):delete b[a]}Object.defineProperty(d,"__esModule",{value:!0});d.add=function(e,a){var c=f.Pointer.fromJSON(a.path).evaluate(e);if(void 0===c.parent)return new b.MissingError(a.path);h(c.parent,c.key,a.value);return null};d.remove=function(e,a){var c=f.Pointer.fromJSON(a.path).evaluate(e);if(void 0===c.value)return new b.MissingError(a.path);k(c.parent,c.key);return null};d.replace=function(e,a){var c=f.Pointer.fromJSON(a.path).evaluate(e);if(void 0===c.value)return new b.MissingError(a.path);c.parent[c.key]=
a.value;return null};d.move=function(e,a){var c=f.Pointer.fromJSON(a.from).evaluate(e);if(void 0===c.value)return new b.MissingError(a.from);var d=f.Pointer.fromJSON(a.path).evaluate(e);if(void 0===d.parent)return new b.MissingError(a.path);k(c.parent,c.key);h(d.parent,d.key,c.value);return null};d.copy=function(c,a){var d=f.Pointer.fromJSON(a.from).evaluate(c);if(void 0===d.value)return new b.MissingError(a.from);var g=f.Pointer.fromJSON(a.path).evaluate(c);if(void 0===g.parent)return new b.MissingError(a.path);
k(d.parent,d.key);h(g.parent,g.key,d.value);return null};d.test=function(e,a){var d=f.Pointer.fromJSON(a.path).evaluate(e);return(0,c.compare)(d.value,a.value)?null:new b.TestError(d.value,a.value)};var f=g("./pointer"),c=g("./equal"),b=g("./errors")},{"./equal":2,"./errors":3,"./pointer":7}],7:[function(g,l,d){function h(c){return c.replace(/~1/g,"/").replace(/~0/g,"~")}function k(c){return c.replace(/~/g,"~0").replace(/\//g,"~1")}Object.defineProperty(d,"__esModule",{value:!0});var f=function(){function c(b,
c){for(var a=0;a<c.length;a++){var d=c[a];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,e,a){e&&c(b.prototype,e);a&&c(b,a);return b}}();g=function(){function c(){var b=0>=arguments.length||void 0===arguments[0]?[""]:arguments[0];if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.tokens=b}f(c,[{key:"toString",value:function(){return this.tokens.map(k).join("/")}},{key:"evaluate",value:function(b){for(var c=
null,a=null,d=1,f=this.tokens.length;d<f;d++)c=b,a=this.tokens[d],b=(c||{})[a];return{parent:c,key:a,value:b}}},{key:"push",value:function(b){this.tokens.push(b)}},{key:"add",value:function(b){b=this.tokens.concat(String(b));return new c(b)}}],[{key:"fromJSON",value:function(b){var d=b.split("/").map(h);if(""!==d[0])throw Error("Invalid JSON Pointer: "+b);return new c(d)}}]);return c}();d.Pointer=g},{}]},{},[4])(4)});
